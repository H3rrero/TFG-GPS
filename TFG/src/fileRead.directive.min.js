(function(){"use strict";function e(e,t){var n=function(n,r,i,o){r.bind("change",function(r){window.chrome&&window.chrome.webstore?t.spin("spinner-2"):"undefined"!=typeof InstallTrigger?t.spin("spinner-2"):t.spin("spinner-2"),n.$apply(function(){n.fileread=r.target.files[0];var t=new FileReader;t.onload=function(t){return function(t){var r=$.parseXML(t.target.result);e.xmlImportado=r,e.isTrackImport&&e.xmlImportado.getElementsByTagName("trkpt").length>0?(o.listaActiva(),e.importXML(),e.centrarMapa(),n.$apply()):e.isWpImport&&e.xmlImportado.getElementsByTagName("wpt").length>0?(e.importXMLWp(),e.centrarWP()):e.xmlImportado.getElementsByTagName("rtept").length>0&&(o.listaActivaR(),e.importXMLRuta(),e.centrarRuta())}}(r.target.files[0]),t.readAsText(r.target.files[0],"UTF-8")}),window.chrome&&window.chrome.webstore?setTimeout(function(){t.stop("spinner-2")},11):"undefined"!=typeof InstallTrigger?setTimeout(function(){t.stop("spinner-2")},1001):setTimeout(function(){t.stop("spinner-2")},3001)})};return{scope:{fileread:"="},controller:"GPSController",link:n}}angular.module("GPS").directive("fileread",e)})();